 /*
 * # Semantic UI - 2.4.2
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(m,v,b,h){m.site=m.fn.site=function(e){var s,l,o=(new Date).getTime(),i=[],t=e,n="string"==typeof t,c=[].slice.call(arguments,1),u=m.isPlainObject(e)?m.extend(!0,{},m.site.settings,e):m.extend({},m.site.settings),r=u.namespace,d=u.error,a="module-"+r,f=m(b),g=this,p=f.data(a);return s={initialize:function(){s.instantiate()},instantiate:function(){s.verbose("Storing instance of site",s),p=s,f.data(a,s)},normalize:function(){s.fix.console(),s.fix.requestAnimationFrame()},fix:{console:function(){s.debug("Normalizing window.console"),console!==h&&console.log!==h||(s.verbose("Console not available, normalizing events"),s.disable.console()),void 0!==console.group&&void 0!==console.groupEnd&&void 0!==console.groupCollapsed||(s.verbose("Console group not available, normalizing events"),v.console.group=function(){},v.console.groupEnd=function(){},v.console.groupCollapsed=function(){}),void 0===console.markTimeline&&(s.verbose("Mark timeline not available, normalizing events"),v.console.markTimeline=function(){})},consoleClear:function(){s.debug("Disabling programmatic console clearing"),v.console.clear=function(){}},requestAnimationFrame:function(){s.debug("Normalizing requestAnimationFrame"),v.requestAnimationFrame===h&&(s.debug("RequestAnimationFrame not available, normalizing event"),v.requestAnimationFrame=v.requestAnimationFrame||v.mozRequestAnimationFrame||v.webkitRequestAnimationFrame||v.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(e){return m.fn[e]!==h&&m.fn[e].settings!==h},enabled:{modules:function(e){var n=[];return e=e||u.modules,m.each(e,function(e,t){s.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(e){var n=[];return e=e||u.modules,m.each(e,function(e,t){s.moduleExists(t)||n.push(t)}),n}},change:{setting:function(i,r,e,a){e="string"==typeof e?"all"===e?u.modules:[e]:e||u.modules,a=a===h||a,m.each(e,function(e,t){var n,o=!s.moduleExists(t)||(m.fn[t].settings.namespace||!1);s.moduleExists(t)&&(s.verbose("Changing default setting",i,r,t),m.fn[t].settings[i]=r,a&&o&&0<(n=m(":data(module-"+o+")")).length&&(s.verbose("Modifying existing settings",n),n[t]("setting",i,r)))})},settings:function(o,e,i){e="string"==typeof e?[e]:e||u.modules,i=i===h||i,m.each(e,function(e,t){var n;s.moduleExists(t)&&(s.verbose("Changing default setting",o,t),m.extend(!0,m.fn[t].settings,o),i&&r&&0<(n=m(":data(module-"+r+")")).length&&(s.verbose("Modifying existing settings",n),n[t]("setting",o)))})}},enable:{console:function(){s.console(!0)},debug:function(e,t){e=e||u.modules,s.debug("Enabling debug for modules",e),s.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||u.modules,s.debug("Enabling verbose debug for modules",e),s.change.setting("verbose",!0,e,t)}},disable:{console:function(){s.console(!1)},debug:function(e,t){e=e||u.modules,s.debug("Disabling debug for modules",e),s.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||u.modules,s.debug("Disabling verbose debug for modules",e),s.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(p.cache.console===h)return void s.error(d.console);s.debug("Restoring console function"),v.console=p.cache.console}else s.debug("Disabling console function"),p.cache.console=v.console,v.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){s.verbose("Destroying previous site for",f),f.removeData(a)},cache:{},setting:function(e,t){if(m.isPlainObject(e))m.extend(!0,u,e);else{if(t===h)return u[e];u[e]=t}},internal:function(e,t){if(m.isPlainObject(e))m.extend(!0,s,e);else{if(t===h)return s[e];s[e]=t}},debug:function(){u.debug&&(u.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,u.name+":"),s.debug.apply(console,arguments)))},verbose:function(){u.verbose&&u.debug&&(u.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),s.verbose.apply(console,arguments)))},error:function(){s.error=Function.prototype.bind.call(console.error,console,u.name+":"),s.error.apply(console,arguments)},performance:{log:function(e){var t,n;u.performance&&(n=(t=(new Date).getTime())-(o||t),o=t,i.push({Element:g,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=u.name+":",n=0;o=!1,clearTimeout(s.performance.timer),m.each(i,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",(console.group!==h||console.table!==h)&&0<i.length&&(console.groupCollapsed(e),console.table?console.table(i):m.each(i,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),i=[]}},invoke:function(o,e,t){var i,r,n,a=p;return e=e||c,t=g||t,"string"==typeof o&&a!==h&&(o=o.split(/[\. ]/),i=o.length-1,m.each(o,function(e,t){var n=e!=i?t+o[e+1].charAt(0).toUpperCase()+o[e+1].slice(1):o;if(m.isPlainObject(a[n])&&e!=i)a=a[n];else{if(a[n]!==h)return r=a[n],!1;if(!m.isPlainObject(a[t])||e==i)return a[t]!==h?r=a[t]:s.error(d.method,o),!1;a=a[t]}})),m.isFunction(r)?n=r.apply(t,e):r!==h&&(n=r),m.isArray(l)?l.push(n):l!==h?l=[l,n]:n!==h&&(l=n),r}},n?(p===h&&s.initialize(),s.invoke(t)):(p!==h&&s.destroy(),s.initialize()),l!==h?l:this},m.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},m.extend(m.expr[":"],{data:m.expr.createPseudo?m.expr.createPseudo(function(t){return function(e){return!!m.data(e,t)}}):function(e,t,n){return!!m.data(e,n[3])}})}(jQuery,window,document),function(A,e,F,z){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),A.fn.form=function(y){var C,k=A(this),w=k.selector||"",P=(new Date).getTime(),E=[],V=y,S=arguments[1],R="string"==typeof V,T=[].slice.call(arguments,1);return k.each(function(){var n,l,t,e,d,c,u,f,g,o,s,i,r,p,m,v,a=A(this),b=this,h=[],x=!1;(v={initialize:function(){v.get.settings(),R?(m===z&&v.instantiate(),v.invoke(V)):(m!==z&&m.invoke("destroy"),v.verbose("Initializing form validation",a,d),v.bindEvents(),v.set.defaults(),v.instantiate())},instantiate:function(){v.verbose("Storing instance of module",v),m=v,a.data(r,v)},destroy:function(){v.verbose("Destroying previous module",m),v.removeEvents(),a.removeData(r)},refresh:function(){v.verbose("Refreshing selector cache"),n=a.find(f.field),l=a.find(f.group),t=a.find(f.message),a.find(f.prompt),e=a.find(f.submit),a.find(f.clear),a.find(f.reset)},submit:function(){v.verbose("Submitting form",a),a.submit()},attachEvents:function(e,t){t=t||"submit",A(e).on("click"+p,function(e){v[t](),e.preventDefault()})},bindEvents:function(){v.verbose("Attaching form events"),a.on("submit"+p,v.validate.form).on("blur"+p,f.field,v.event.field.blur).on("click"+p,f.submit,v.submit).on("click"+p,f.reset,v.reset).on("click"+p,f.clear,v.clear),d.keyboardShortcuts&&a.on("keydown"+p,f.field,v.event.field.keydown),n.each(function(){var e=A(this),t=e.prop("type"),n=v.get.changeEvent(t,e);A(this).on(n+p,v.event.field.change)})},clear:function(){n.each(function(){var e=A(this),t=e.parent(),n=e.closest(l),o=n.find(f.prompt),i=e.data(u.defaultValue)||"",r=t.is(f.uiCheckbox),a=t.is(f.uiDropdown);n.hasClass(g.error)&&(v.verbose("Resetting error on field",n),n.removeClass(g.error),o.remove()),a?(v.verbose("Resetting dropdown value",t,i),t.dropdown("clear")):r?e.prop("checked",!1):(v.verbose("Resetting field value",e,i),e.val(""))})},reset:function(){n.each(function(){var e=A(this),t=e.parent(),n=e.closest(l),o=n.find(f.prompt),i=e.data(u.defaultValue),r=t.is(f.uiCheckbox),a=t.is(f.uiDropdown),s=n.hasClass(g.error);i!==z&&(s&&(v.verbose("Resetting error on field",n),n.removeClass(g.error),o.remove()),a?(v.verbose("Resetting dropdown value",t,i),t.dropdown("restore defaults")):r?(v.verbose("Resetting checkbox value",t,i),e.prop("checked",i)):(v.verbose("Resetting field value",e,i),e.val(i)))})},determine:{isValid:function(){var n=!0;return A.each(c,function(e,t){v.validate.field(t,e,!0)||(n=!1)}),n}},is:{bracketedRule:function(e){return e.type&&e.type.match(d.regExp.bracket)},shorthandFields:function(e){var t=e[Object.keys(e)[0]];return v.is.shorthandRules(t)},shorthandRules:function(e){return"string"==typeof e||A.isArray(e)},empty:function(e){return!e||0===e.length||(e.is('input[type="checkbox"]')?!e.is(":checked"):v.is.blank(e))},blank:function(e){return""===A.trim(e.val())},valid:function(e){var n=!0;return e?(v.verbose("Checking if field is valid",e),v.validate.field(c[e],e,!1)):(v.verbose("Checking if form is valid"),A.each(c,function(e,t){v.is.valid(e)||(n=!1)}),n)}},removeEvents:function(){a.off(p),n.off(p),e.off(p),n.off(p)},event:{field:{keydown:function(e){var t=A(this),n=e.which,o=t.is(f.input),i=t.is(f.checkbox),r=0<t.closest(f.uiDropdown).length,a=13;n==27&&(v.verbose("Escape key pressed blurring field"),t.blur()),e.ctrlKey||n!=a||!o||r||i||(x||(t.one("keyup"+p,v.event.field.keyup),v.submit(),v.debug("Enter pressed on input submitting form")),x=!0)},keyup:function(){x=!1},blur:function(e){var t=A(this),n=t.closest(l),o=v.get.validation(t);n.hasClass(g.error)?(v.debug("Revalidating field",t,o),o&&v.validate.field(o)):"blur"==d.on&&o&&v.validate.field(o)},change:function(e){var t=A(this),n=t.closest(l),o=v.get.validation(t);o&&("change"==d.on||n.hasClass(g.error)&&d.revalidate)&&(clearTimeout(v.timer),v.timer=setTimeout(function(){v.debug("Revalidating field",t,v.get.validation(t)),v.validate.field(o)},d.delay))}}},get:{ancillaryValue:function(e){return!(!e.type||!e.value&&!v.is.bracketedRule(e))&&(e.value!==z?e.value:e.type.match(d.regExp.bracket)[1]+"")},ruleName:function(e){return v.is.bracketedRule(e)?e.type.replace(e.type.match(d.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":v.get.inputEvent()},inputEvent:function(){return F.createElement("input").oninput!==z?"input":F.createElement("input").onpropertychange!==z?"propertychange":"keyup"},fieldsFromShorthand:function(e){var o={};return A.each(e,function(n,e){"string"==typeof e&&(e=[e]),o[n]={rules:[]},A.each(e,function(e,t){o[n].rules.push({type:t})})}),o},prompt:function(e,t){var n,o,i=v.get.ruleName(e),r=v.get.ancillaryValue(e),a=v.get.field(t.identifier),s=a.val(),l=A.isFunction(e.prompt)?e.prompt(s):e.prompt||d.prompt[i]||d.text.unspecifiedRule,c=-1!==l.search("{value}"),u=-1!==l.search("{name}");return c&&(l=l.replace("{value}",a.val())),u&&(o=1==(n=a.closest(f.group).find("label").eq(0)).length?n.text():a.prop("placeholder")||d.text.unspecifiedField,l=l.replace("{name}",o)),l=(l=l.replace("{identifier}",t.identifier)).replace("{ruleValue}",r),e.prompt||v.verbose("Using default validation prompt for type",l,i),l},settings:function(){if(A.isPlainObject(y)){var e=Object.keys(y);0<e.length&&(y[e[0]].identifier!==z&&y[e[0]].rules!==z)?(d=A.extend(!0,{},A.fn.form.settings,S),c=A.extend({},A.fn.form.settings.defaults,y),v.error(d.error.oldSyntax,b),v.verbose("Extending settings from legacy parameters",c,d)):(y.fields&&v.is.shorthandFields(y.fields)&&(y.fields=v.get.fieldsFromShorthand(y.fields)),d=A.extend(!0,{},A.fn.form.settings,y),c=A.extend({},A.fn.form.settings.defaults,d.fields),v.verbose("Extending settings",c,d))}else d=A.fn.form.settings,c=A.fn.form.settings.defaults,v.verbose("Using default form validation",c,d);i=d.namespace,u=d.metadata,f=d.selector,g=d.className,o=d.regExp,s=d.error,r="module-"+i,p="."+i,m=a.data(r),v.refresh()},field:function(e){return v.verbose("Finding field with identifier",e),e=v.escape.string(e),0<n.filter("#"+e).length?n.filter("#"+e):0<n.filter('[name="'+e+'"]').length?n.filter('[name="'+e+'"]'):0<n.filter('[name="'+e+'[]"]').length?n.filter('[name="'+e+'[]"]'):0<n.filter("[data-"+u.validate+'="'+e+'"]').length?n.filter("[data-"+u.validate+'="'+e+'"]'):A("<input/>")},fields:function(e){var n=A();return A.each(e,function(e,t){n=n.add(v.get.field(t))}),n},validation:function(n){var o,i;return!!c&&(A.each(c,function(e,t){i=t.identifier||e,v.get.field(i)[0]==n[0]&&(t.identifier=i,o=t)}),o||!1)},value:function(e){var t=[];return t.push(e),v.get.values.call(b,t)[e]},values:function(e){var t=A.isArray(e)?v.get.fields(e):n,c={};return t.each(function(e,t){var n=A(t),o=(n.prop("type"),n.prop("name")),i=n.val(),r=n.is(f.checkbox),a=n.is(f.radio),s=-1!==o.indexOf("[]"),l=!!r&&n.is(":checked");o&&(s?(o=o.replace("[]",""),c[o]||(c[o]=[]),r?l?c[o].push(i||!0):c[o].push(!1):c[o].push(i)):a?c[o]!==z&&0!=c[o]||(c[o]=!!l&&(i||!0)):c[o]=r?!!l&&(i||!0):i)}),c}},has:{field:function(e){return v.verbose("Checking for existence of a field with identifier",e),"string"!=typeof(e=v.escape.string(e))&&v.error(s.identifier,e),0<n.filter("#"+e).length||(0<n.filter('[name="'+e+'"]').length||0<n.filter("[data-"+u.validate+'="'+e+'"]').length)}},escape:{string:function(e){return(e=String(e)).replace(o.escape,"\\$&")}},add:{rule:function(e,t){v.add.field(e,t)},field:function(n,e){var o={};v.is.shorthandRules(e)?(e=A.isArray(e)?e:[e],o[n]={rules:[]},A.each(e,function(e,t){o[n].rules.push({type:t})})):o[n]=e,c=A.extend({},c,o),v.debug("Adding rules",o,c)},fields:function(e){var t;t=e&&v.is.shorthandFields(e)?v.get.fieldsFromShorthand(e):e,c=A.extend({},c,t)},prompt:function(e,t){var n=v.get.field(e).closest(l),o=n.children(f.prompt),i=0!==o.length;t="string"==typeof t?[t]:t,v.verbose("Adding field error state",e),n.addClass(g.error),d.inline&&(i||(o=d.templates.prompt(t)).appendTo(n),o.html(t[0]),i?v.verbose("Inline errors are disabled, no inline error added",e):d.transition&&A.fn.transition!==z&&a.transition("is supported")?(v.verbose("Displaying error with css transition",d.transition),o.transition(d.transition+" in",d.duration)):(v.verbose("Displaying error with fallback javascript animation"),o.fadeIn(d.duration)))},errors:function(e){v.debug("Adding form error messages",e),v.set.error(),t.html(d.templates.error(e))}},remove:{rule:function(n,e){var o=A.isArray(e)?e:[e];if(e==z)return v.debug("Removed all rules"),void(c[n].rules=[]);c[n]!=z&&A.isArray(c[n].rules)&&A.each(c[n].rules,function(e,t){-1!==o.indexOf(t.type)&&(v.debug("Removed rule",t.type),c[n].rules.splice(e,1))})},field:function(e){var t=A.isArray(e)?e:[e];A.each(t,function(e,t){v.remove.rule(t)})},rules:function(e,n){A.isArray(e)?A.each(fields,function(e,t){v.remove.rule(t,n)}):v.remove.rule(e,n)},fields:function(e){v.remove.field(e)},prompt:function(e){var t=v.get.field(e).closest(l),n=t.children(f.prompt);t.removeClass(g.error),d.inline&&n.is(":visible")&&(v.verbose("Removing prompt for field",e),d.transition&&A.fn.transition!==z&&a.transition("is supported")?n.transition(d.transition+" out",d.duration,function(){n.remove()}):n.fadeOut(d.duration,function(){n.remove()}))}},set:{success:function(){a.removeClass(g.error).addClass(g.success)},defaults:function(){n.each(function(){var e=A(this),t=0<e.filter(f.checkbox).length?e.is(":checked"):e.val();e.data(u.defaultValue,t)})},error:function(){a.removeClass(g.success).addClass(g.error)},value:function(e,t){var n={};return n[e]=t,v.set.values.call(b,n)},values:function(e){A.isEmptyObject(e)||A.each(e,function(e,t){var n,o=v.get.field(e),i=o.parent(),r=A.isArray(t),a=i.is(f.uiCheckbox),s=i.is(f.uiDropdown),l=o.is(f.radio)&&a;0<o.length&&(r&&a?(v.verbose("Selecting multiple",t,o),i.checkbox("uncheck"),A.each(t,function(e,t){n=o.filter('[value="'+t+'"]'),i=n.parent(),0<n.length&&i.checkbox("check")})):l?(v.verbose("Selecting radio value",t,o),o.filter('[value="'+t+'"]').parent(f.uiCheckbox).checkbox("check")):a?(v.verbose("Setting checkbox value",t,i),!0===t?i.checkbox("check"):i.checkbox("uncheck")):s?(v.verbose("Setting dropdown value",t,i),i.dropdown("set selected",t)):(v.verbose("Setting field value",t,o),o.val(t)))})}},validate:{form:function(e,t){var n=v.get.values();if(x)return!1;if(h=[],v.determine.isValid()){if(v.debug("Form has no validation errors, submitting"),v.set.success(),!0!==t)return d.onSuccess.call(b,e,n)}else if(v.debug("Form has errors"),v.set.error(),d.inline||v.add.errors(h),a.data("moduleApi")!==z&&e.stopImmediatePropagation(),!0!==t)return d.onFailure.call(b,h,n)},field:function(n,e,t){t=t===z||t,"string"==typeof n&&(v.verbose("Validating field",n),n=c[e=n]);var o=n.identifier||e,i=v.get.field(o),r=!!n.depends&&v.get.field(n.depends),a=!0,s=[];return n.identifier||(v.debug("Using field name as identifier",o),n.identifier=o),i.prop("disabled")?(v.debug("Field is disabled. Skipping",o),a=!0):n.optional&&v.is.blank(i)?(v.debug("Field is optional and blank. Skipping",o),a=!0):n.depends&&v.is.empty(r)?(v.debug("Field depends on another value that is not present or empty. Skipping",r),a=!0):n.rules!==z&&A.each(n.rules,function(e,t){v.has.field(o)&&!v.validate.rule(n,t)&&(v.debug("Field is invalid",o,t.type),s.push(v.get.prompt(t,n)),a=!1)}),a?(t&&(v.remove.prompt(o,s),d.onValid.call(i)),!0):(t&&(h=h.concat(s),v.add.prompt(o,s),d.onInvalid.call(i,s)),!1)},rule:function(e,t){var n=v.get.field(e.identifier),o=(t.type,n.val()),i=v.get.ancillaryValue(t),r=v.get.ruleName(t),a=d.rules[r];if(A.isFunction(a))return o=o===z||""===o||null===o?"":A.trim(o+""),a.call(n,o,i);v.error(s.noRule,r)}},setting:function(e,t){if(A.isPlainObject(e))A.extend(!0,d,e);else{if(t===z)return d[e];d[e]=t}},internal:function(e,t){if(A.isPlainObject(e))A.extend(!0,v,e);else{if(t===z)return v[e];v[e]=t}},debug:function(){!d.silent&&d.debug&&(d.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,d.name+":"),v.debug.apply(console,arguments)))},verbose:function(){!d.silent&&d.verbose&&d.debug&&(d.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,d.name+":"),v.verbose.apply(console,arguments)))},error:function(){d.silent||(v.error=Function.prototype.bind.call(console.error,console,d.name+":"),v.error.apply(console,arguments))},performance:{log:function(e){var t,n;d.performance&&(n=(t=(new Date).getTime())-(P||t),P=t,E.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:b,"Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var e=d.name+":",n=0;P=!1,clearTimeout(v.performance.timer),A.each(E,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",w&&(e+=" '"+w+"'"),1<k.length&&(e+=" ("+k.length+")"),(console.group!==z||console.table!==z)&&0<E.length&&(console.groupCollapsed(e),console.table?console.table(E):A.each(E,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),E=[]}},invoke:function(o,e,t){var i,r,n,a=m;return e=e||T,t=b||t,"string"==typeof o&&a!==z&&(o=o.split(/[\. ]/),i=o.length-1,A.each(o,function(e,t){var n=e!=i?t+o[e+1].charAt(0).toUpperCase()+o[e+1].slice(1):o;if(A.isPlainObject(a[n])&&e!=i)a=a[n];else{if(a[n]!==z)return r=a[n],!1;if(!A.isPlainObject(a[t])||e==i)return a[t]!==z&&(r=a[t]),!1;a=a[t]}})),A.isFunction(r)?n=r.apply(t,e):r!==z&&(n=r),A.isArray(C)?C.push(n):C!==z?C=[C,n]:n!==z&&(C=n),r}}).initialize()}),C!==z?C:this},A.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} must contain "{ruleValue}"',containExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain  "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(e){var n='<ul class="list">';return A.each(e,function(e,t){n+="<li>"+t+"</li>"}),A(n+="</ul>")},prompt:function(e){return A("<div/>").addClass("ui basic red pointing prompt label").html(e[0])}},rules:{empty:function(e){return!(e===z||""===e||A.isArray(e)&&0===e.length)},checked:function(){return 0<A(this).filter(":checked").length},email:function(e){return A.fn.form.settings.regExp.email.test(e)},url:function(e){return A.fn.form.settings.regExp.url.test(e)},regExp:function(e,t){if(t instanceof RegExp)return e.match(t);var n,o=t.match(A.fn.form.settings.regExp.flags);return o&&(t=2<=o.length?o[1]:t,n=3<=o.length?o[2]:""),e.match(new RegExp(t,n))},integer:function(e,t){var n,o,i,r=A.fn.form.settings.regExp.integer;return t&&-1===["",".."].indexOf(t)&&(-1==t.indexOf("..")?r.test(t)&&(n=o=t-0):(i=t.split("..",2),r.test(i[0])&&(n=i[0]-0),r.test(i[1])&&(o=i[1]-0))),r.test(e)&&(n===z||n<=e)&&(o===z||e<=o)},decimal:function(e){return A.fn.form.settings.regExp.decimal.test(e)},number:function(e){return A.fn.form.settings.regExp.number.test(e)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,(e="string"==typeof e?e.toLowerCase():e)==t},isExactly:function(e,t){return e==t},not:function(e,t){return(e="string"==typeof e?e.toLowerCase():e)!=(t="string"==typeof t?t.toLowerCase():t)},notExactly:function(e,t){return e!=t},contains:function(e,t){return t=t.replace(A.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(t,"i"))},containsExactly:function(e,t){return t=t.replace(A.fn.form.settings.regExp.escape,"\\$&"),-1!==e.search(new RegExp(t))},doesntContain:function(e,t){return t=t.replace(A.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(t,"i"))},doesntContainExactly:function(e,t){return t=t.replace(A.fn.form.settings.regExp.escape,"\\$&"),-1===e.search(new RegExp(t))},minLength:function(e,t){return e!==z&&e.length>=t},length:function(e,t){return e!==z&&e.length>=t},exactLength:function(e,t){return e!==z&&e.length==t},maxLength:function(e,t){return e!==z&&e.length<=t},match:function(e,t){var n;A(this);return 0<A('[data-validate="'+t+'"]').length?n=A('[data-validate="'+t+'"]').val():0<A("#"+t).length?n=A("#"+t).val():0<A('[name="'+t+'"]').length?n=A('[name="'+t+'"]').val():0<A('[name="'+t+'[]"]').length&&(n=A('[name="'+t+'[]"]')),n!==z&&e.toString()==n.toString()},different:function(e,t){var n;A(this);return 0<A('[data-validate="'+t+'"]').length?n=A('[data-validate="'+t+'"]').val():0<A("#"+t).length?n=A("#"+t).val():0<A('[name="'+t+'"]').length?n=A('[name="'+t+'"]').val():0<A('[name="'+t+'[]"]').length&&(n=A('[name="'+t+'[]"]')),n!==z&&e.toString()!==n.toString()},creditCard:function(n,e){var t,o,i={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},r={},a=!1,s="string"==typeof e&&e.split(",");if("string"==typeof n&&0!==n.length){if(n=n.replace(/[\-]/g,""),s&&(A.each(s,function(e,t){(o=i[t])&&(r={length:-1!==A.inArray(n.length,o.length),pattern:-1!==n.search(o.pattern)}).length&&r.pattern&&(a=!0)}),!a))return!1;if((t={number:-1!==A.inArray(n.length,i.unionPay.length),pattern:-1!==n.search(i.unionPay.pattern)}).number&&t.pattern)return!0;for(var l=n.length,c=0,u=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],d=0;l--;)d+=u[c][parseInt(n.charAt(l),10)],c^=1;return d%10==0&&0<d}},minCount:function(e,t){return 0==t||(1==t?""!==e:e.split(",").length>=t)},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0!=t&&(1==t?-1===e.search(","):e.split(",").length<=t)}}}}(jQuery,window,document),function(P,e,E,V){"use strict";void 0!==(e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")())&&e.Math==Math||("undefined"!=typeof self&&self.Math==Math?self:Function("return this")());P.fn.progress=function(v){var b,e=P(this),h=e.selector||"",x=(new Date).getTime(),y=[],C=v,k="string"==typeof C,w=[].slice.call(arguments,1);return e.each(function(){var s,o=P.isPlainObject(v)?P.extend(!0,{},P.fn.progress.settings,v):P.extend({},P.fn.progress.settings),t=o.className,n=o.metadata,e=o.namespace,i=o.selector,l=o.error,r="."+e,a="module-"+e,c=P(this),u=P(this).find(i.bar),d=P(this).find(i.progress),f=P(this).find(i.label),g=this,p=c.data(a),m=!1;s={initialize:function(){s.debug("Initializing progress bar",o),s.set.duration(),s.set.transitionEvent(),s.read.metadata(),s.read.settings(),s.instantiate()},instantiate:function(){s.verbose("Storing instance of progress",s),p=s,c.data(a,s)},destroy:function(){s.verbose("Destroying previous progress for",c),clearInterval(p.interval),s.remove.state(),c.removeData(a),p=V},reset:function(){s.remove.nextValue(),s.update.progress(0)},complete:function(){(s.percent===V||s.percent<100)&&(s.remove.progressPoll(),s.set.percent(100))},read:{metadata:function(){var e={percent:c.data(n.percent),total:c.data(n.total),value:c.data(n.value)};e.percent&&(s.debug("Current percent value set from metadata",e.percent),s.set.percent(e.percent)),e.total&&(s.debug("Total value set from metadata",e.total),s.set.total(e.total)),e.value&&(s.debug("Current value set from metadata",e.value),s.set.value(e.value),s.set.progress(e.value))},settings:function(){!1!==o.total&&(s.debug("Current total set in settings",o.total),s.set.total(o.total)),!1!==o.value&&(s.debug("Current value set in settings",o.value),s.set.value(o.value),s.set.progress(s.value)),!1!==o.percent&&(s.debug("Current percent set in settings",o.percent),s.set.percent(o.percent))}},bind:{transitionEnd:function(t){var e=s.get.transitionEnd();u.one(e+r,function(e){clearTimeout(s.failSafeTimer),t.call(this,e)}),s.failSafeTimer=setTimeout(function(){u.triggerHandler(e)},o.duration+o.failSafeDelay),s.verbose("Adding fail safe timer",s.timer)}},increment:function(e){var t,n;s.has.total()?n=(t=s.get.value())+(e=e||1):(n=(t=s.get.percent())+(e=e||s.get.randomValue()),100,s.debug("Incrementing percentage by",t,n)),n=s.get.normalizedValue(n),s.set.progress(n)},decrement:function(e){var t,n;s.get.total()?(n=(t=s.get.value())-(e=e||1),s.debug("Decrementing value by",e,t)):(n=(t=s.get.percent())-(e=e||s.get.randomValue()),s.debug("Decrementing percentage by",e,t)),n=s.get.normalizedValue(n),s.set.progress(n)},has:{progressPoll:function(){return s.progressPoll},total:function(){return!1!==s.get.total()}},get:{text:function(e){var t=s.value||0,n=s.total||0,o=m?s.get.displayPercent():s.percent||0,i=0<s.total?n-t:100-o;return e=(e=e||"").replace("{value}",t).replace("{total}",n).replace("{left}",i).replace("{percent}",o),s.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return s.debug("Value cannot decrement below 0"),0;if(s.has.total()){if(e>s.total)return s.debug("Value cannot increment above total",s.total),s.total}else if(100<e)return s.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==o.updateInterval?o.duration:o.updateInterval},randomValue:function(){return s.debug("Generating random increment percentage"),Math.floor(Math.random()*o.random.max+o.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=E.createElement("element"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(t.style[e]!==V)return n[e]},displayPercent:function(){var e=u.width(),t=c.width(),n=parseInt(u.css("min-width"),10)<e?e/t*100:s.percent;return 0<o.precision?Math.round(n*(10*o.precision))/(10*o.precision):Math.round(n)},percent:function(){return s.percent||0},value:function(){return s.nextValue||s.value||0},total:function(){return s.total||!1}},create:{progressPoll:function(){s.progressPoll=setTimeout(function(){s.update.toNextValue(),s.remove.progressPoll()},s.get.updateInterval())}},is:{complete:function(){return s.is.success()||s.is.warning()||s.is.error()},success:function(){return c.hasClass(t.success)},warning:function(){return c.hasClass(t.warning)},error:function(){return c.hasClass(t.error)},active:function(){return c.hasClass(t.active)},visible:function(){return c.is(":visible")}},remove:{progressPoll:function(){s.verbose("Removing progress poll timer"),s.progressPoll&&(clearTimeout(s.progressPoll),delete s.progressPoll)},nextValue:function(){s.verbose("Removing progress value stored for next update"),delete s.nextValue},state:function(){s.verbose("Removing stored state"),delete s.total,delete s.percent,delete s.value},active:function(){s.verbose("Removing active state"),c.removeClass(t.active)},success:function(){s.verbose("Removing success state"),c.removeClass(t.success)},warning:function(){s.verbose("Removing warning state"),c.removeClass(t.warning)},error:function(){s.verbose("Removing error state"),c.removeClass(t.error)}},set:{barWidth:function(e){100<e?s.error(l.tooHigh,e):e<0?s.error(l.tooLow,e):(u.css("width",e+"%"),c.attr("data-percent",parseInt(e,10)))},duration:function(e){e="number"==typeof(e=e||o.duration)?e+"ms":e,s.verbose("Setting progress bar transition duration",e),u.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=0<o.precision?Math.round(e*(10*o.precision))/(10*o.precision):Math.round(e),s.percent=e,s.has.total()||(s.value=0<o.precision?Math.round(e/100*s.total*(10*o.precision))/(10*o.precision):Math.round(e/100*s.total*10)/10,o.limitValues&&(s.value=100<s.value?100:s.value<0?0:s.value)),s.set.barWidth(e),s.set.labelInterval(),s.set.labels(),o.onChange.call(g,e,s.value,s.total)},labelInterval:function(){clearInterval(s.interval),s.bind.transitionEnd(function(){s.verbose("Bar finished animating, removing continuous label updates"),clearInterval(s.interval),m=!1,s.set.labels()}),m=!0,s.interval=setInterval(function(){P.contains(E.documentElement,g)||(clearInterval(s.interval),m=!1),s.set.labels()},o.framerate)},labels:function(){s.verbose("Setting both bar progress and outer label text"),s.set.barLabel(),s.set.state()},label:function(e){(e=e||"")&&(e=s.get.text(e),s.verbose("Setting label to text",e),f.text(e))},state:function(e){100===(e=e!==V?e:s.percent)?o.autoSuccess&&!(s.is.warning()||s.is.error()||s.is.success())?(s.set.success(),s.debug("Automatically triggering success at 100%")):(s.verbose("Reached 100% removing active state"),s.remove.active(),s.remove.progressPoll()):0<e?(s.verbose("Adjusting active progress bar label",e),s.set.active()):(s.remove.active(),s.set.label(o.text.active))},barLabel:function(e){e!==V?d.text(s.get.text(e)):"ratio"==o.label&&s.total?(s.verbose("Adding ratio to bar label"),d.text(s.get.text(o.text.ratio))):"percent"==o.label&&(s.verbose("Adding percentage to bar label"),d.text(s.get.text(o.text.percent)))},active:function(e){e=e||o.text.active,s.debug("Setting active state"),o.showActivity&&!s.is.active()&&c.addClass(t.active),s.remove.warning(),s.remove.error(),s.remove.success(),(e=o.onLabelUpdate("active",e,s.value,s.total))&&s.set.label(e),s.bind.transitionEnd(function(){o.onActive.call(g,s.value,s.total)})},success:function(e){e=e||o.text.success||o.text.active,s.debug("Setting success state"),c.addClass(t.success),s.remove.active(),s.remove.warning(),s.remove.error(),s.complete(),e=o.text.success?o.onLabelUpdate("success",e,s.value,s.total):o.onLabelUpdate("active",e,s.value,s.total),s.set.label(e),s.bind.transitionEnd(function(){o.onSuccess.call(g,s.total)})},warning:function(e){e=e||o.text.warning,s.debug("Setting warning state"),c.addClass(t.warning),s.remove.active(),s.remove.success(),s.remove.error(),s.complete(),(e=o.onLabelUpdate("warning",e,s.value,s.total))&&s.set.label(e),s.bind.transitionEnd(function(){o.onWarning.call(g,s.value,s.total)})},error:function(e){e=e||o.text.error,s.debug("Setting error state"),c.addClass(t.error),s.remove.active(),s.remove.success(),s.remove.warning(),s.complete(),(e=o.onLabelUpdate("error",e,s.value,s.total))&&s.set.label(e),s.bind.transitionEnd(function(){o.onError.call(g,s.value,s.total)})},transitionEvent:function(){s.get.transitionEnd()},total:function(e){s.total=e},value:function(e){s.value=e},progress:function(e){s.has.progressPoll()?(s.debug("Updated within interval, setting next update to use new value",e),s.set.nextValue(e)):(s.debug("First update in progress update interval, immediately updating",e),s.update.progress(e),s.create.progressPoll())},nextValue:function(e){s.nextValue=e}},update:{toNextValue:function(){var e=s.nextValue;e&&(s.debug("Update interval complete using last updated value",e),s.update.progress(e),s.remove.nextValue())},progress:function(e){var t;!1===(e=s.get.numericValue(e))&&s.error(l.nonNumeric,e),e=s.get.normalizedValue(e),s.has.total()?(s.set.value(e),t=e/s.total*100,s.debug("Calculating percent complete from total",t)):(t=e,s.debug("Setting value to exact percentage value",t)),s.set.percent(t)}},setting:function(e,t){if(s.debug("Changing setting",e,t),P.isPlainObject(e))P.extend(!0,o,e);else{if(t===V)return o[e];P.isPlainObject(o[e])?P.extend(!0,o[e],t):o[e]=t}},internal:function(e,t){if(P.isPlainObject(e))P.extend(!0,s,e);else{if(t===V)return s[e];s[e]=t}},debug:function(){!o.silent&&o.debug&&(o.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,o.name+":"),s.debug.apply(console,arguments)))},verbose:function(){!o.silent&&o.verbose&&o.debug&&(o.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,o.name+":"),s.verbose.apply(console,arguments)))},error:function(){o.silent||(s.error=Function.prototype.bind.call(console.error,console,o.name+":"),s.error.apply(console,arguments))},performance:{log:function(e){var t,n;o.performance&&(n=(t=(new Date).getTime())-(x||t),x=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:g,"Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=o.name+":",n=0;x=!1,clearTimeout(s.performance.timer),P.each(y,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",h&&(e+=" '"+h+"'"),(console.group!==V||console.table!==V)&&0<y.length&&(console.groupCollapsed(e),console.table?console.table(y):P.each(y,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),y=[]}},invoke:function(o,e,t){var i,r,n,a=p;return e=e||w,t=g||t,"string"==typeof o&&a!==V&&(o=o.split(/[\. ]/),i=o.length-1,P.each(o,function(e,t){var n=e!=i?t+o[e+1].charAt(0).toUpperCase()+o[e+1].slice(1):o;if(P.isPlainObject(a[n])&&e!=i)a=a[n];else{if(a[n]!==V)return r=a[n],!1;if(!P.isPlainObject(a[t])||e==i)return a[t]!==V?r=a[t]:s.error(l.method,o),!1;a=a[t]}})),P.isFunction(r)?n=r.apply(t,e):r!==V&&(n=r),P.isArray(b)?b.push(n):b!==V?b=[b,n]:n!==V&&(b=n),r}},k?(p===V&&s.initialize(),s.invoke(C)):(p!==V&&p.invoke("destroy"),s.initialize())}),b!==V?b:this},P.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t,n,o){return t},onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document),function(R,T,A,F){"use strict";T=void 0!==T&&T.Math==Math?T:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),R.fn.visibility=function(h){var x,e=R(this),y=e.selector||"",C=(new Date).getTime(),k=[],w=h,P="string"==typeof w,E=[].slice.call(arguments,1),V=e.length,S=0;return e.each(function(){var e,t,n,s,i=R.isPlainObject(h)?R.extend(!0,{},R.fn.visibility.settings,h):R.extend({},R.fn.visibility.settings),o=i.className,r=i.namespace,l=i.error,a=i.metadata,c="."+r,u="module-"+r,d=R(T),f=R(this),g=R(i.context),p=(f.selector,f.data(u)),m=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||T.msRequestAnimationFrame||function(e){setTimeout(e,0)},v=this,b=!1;s={initialize:function(){s.debug("Initializing",i),s.setup.cache(),s.should.trackChanges()&&("image"==i.type&&s.setup.image(),"fixed"==i.type&&s.setup.fixed(),i.observeChanges&&s.observeChanges(),s.bind.events()),s.save.position(),s.is.visible()||s.error(l.visible,f),i.initialCheck&&s.checkVisibility(),s.instantiate()},instantiate:function(){s.debug("Storing instance",s),f.data(u,s),p=s},destroy:function(){s.verbose("Destroying previous module"),n&&n.disconnect(),t&&t.disconnect(),d.off("load"+c,s.event.load).off("resize"+c,s.event.resize),g.off("scroll"+c,s.event.scroll).off("scrollchange"+c,s.event.scrollchange),"fixed"==i.type&&(s.resetFixed(),s.remove.placeholder()),f.off(c).removeData(u)},observeChanges:function(){"MutationObserver"in T&&(t=new MutationObserver(s.event.contextChanged),n=new MutationObserver(s.event.changed),t.observe(A,{childList:!0,subtree:!0}),n.observe(v,{childList:!0,subtree:!0}),s.debug("Setting up mutation observer",n))},bind:{events:function(){s.verbose("Binding visibility events to scroll and resize"),i.refreshOnLoad&&d.on("load"+c,s.event.load),d.on("resize"+c,s.event.resize),g.off("scroll"+c).on("scroll"+c,s.event.scroll).on("scrollchange"+c,s.event.scrollchange)}},event:{changed:function(e){s.verbose("DOM tree modified, updating visibility calculations"),s.timer=setTimeout(function(){s.verbose("DOM tree modified, updating sticky menu"),s.refresh()},100)},contextChanged:function(e){[].forEach.call(e,function(e){e.removedNodes&&[].forEach.call(e.removedNodes,function(e){(e==v||0<R(e).find(v).length)&&(s.debug("Element removed from DOM, tearing down events"),s.destroy())})})},resize:function(){s.debug("Window resized"),i.refreshOnResize&&m(s.refresh)},load:function(){s.debug("Page finished loading"),m(s.refresh)},scroll:function(){i.throttle?(clearTimeout(s.timer),s.timer=setTimeout(function(){g.triggerHandler("scrollchange"+c,[g.scrollTop()])},i.throttle)):m(function(){g.triggerHandler("scrollchange"+c,[g.scrollTop()])})},scrollchange:function(e,t){s.checkVisibility(t)}},precache:function(e,t){e instanceof Array||(e=[e]);for(var n=e.length,o=0,i=[],r=A.createElement("img"),a=function(){++o>=e.length&&R.isFunction(t)&&t()};n--;)(r=A.createElement("img")).onload=a,r.onerror=a,r.src=e[n],i.push(r)},enableCallbacks:function(){s.debug("Allowing callbacks to occur"),b=!1},disableCallbacks:function(){s.debug("Disabling all callbacks temporarily"),b=!0},should:{trackChanges:function(){return P?(s.debug("One time query, no need to bind events"),!1):(s.debug("Callbacks being attached"),!0)}},setup:{cache:function(){s.cache={occurred:{},screen:{},element:{}}},image:function(){var e=f.data(a.src);e&&(s.verbose("Lazy loading image",e),i.once=!0,i.observeChanges=!1,i.onOnScreen=function(){s.debug("Image on screen",v),s.precache(e,function(){s.set.image(e,function(){++S==V&&i.onAllLoaded.call(this),i.onLoad.call(this)})})})},fixed:function(){s.debug("Setting up fixed"),i.once=!1,i.observeChanges=!1,i.initialCheck=!0,i.refreshOnLoad=!0,h.transition||(i.transition=!1),s.create.placeholder(),s.debug("Added placeholder",e),i.onTopPassed=function(){s.debug("Element passed, adding fixed position",f),s.show.placeholder(),s.set.fixed(),i.transition&&R.fn.transition!==F&&f.transition(i.transition,i.duration)},i.onTopPassedReverse=function(){s.debug("Element returned to position, removing fixed",f),s.hide.placeholder(),s.remove.fixed()}}},create:{placeholder:function(){s.verbose("Creating fixed position placeholder"),e=f.clone(!1).css("display","none").addClass(o.placeholder).insertAfter(f)}},show:{placeholder:function(){s.verbose("Showing placeholder"),e.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){s.verbose("Hiding placeholder"),e.css("display","none").css("visibility","")}},set:{fixed:function(){s.verbose("Setting element to fixed position"),f.addClass(o.fixed).css({position:"fixed",top:i.offset+"px",left:"auto",zIndex:i.zIndex}),i.onFixed.call(v)},image:function(e,t){if(f.attr("src",e),i.transition)if(R.fn.transition!==F){if(f.hasClass(o.visible))return void s.debug("Transition already occurred on this image, skipping animation");f.transition(i.transition,i.duration,t)}else f.fadeIn(i.duration,t);else f.show()}},is:{onScreen:function(){return s.get.elementCalculations().onScreen},offScreen:function(){return s.get.elementCalculations().offScreen},visible:function(){return!(!s.cache||!s.cache.element)&&!(0===s.cache.element.width&&0===s.cache.element.offset.top)},verticallyScrollableContext:function(){var e=g.get(0)!==T&&g.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=g.get(0)!==T&&g.css("overflow-x");return"auto"==e||"scroll"==e}},refresh:function(){s.debug("Refreshing constants (width/height)"),"fixed"==i.type&&s.resetFixed(),s.reset(),s.save.position(),i.checkOnRefresh&&s.checkVisibility(),i.onRefresh.call(v)},resetFixed:function(){s.remove.fixed(),s.remove.occurred()},reset:function(){s.verbose("Resetting all cached values"),R.isPlainObject(s.cache)&&(s.cache.screen={},s.cache.element={})},checkVisibility:function(e){s.verbose("Checking visibility of element",s.cache.element),!b&&s.is.visible()&&(s.save.scroll(e),s.save.calculations(),s.passed(),s.passingReverse(),s.topVisibleReverse(),s.bottomVisibleReverse(),s.topPassedReverse(),s.bottomPassedReverse(),s.onScreen(),s.offScreen(),s.passing(),s.topVisible(),s.bottomVisible(),s.topPassed(),s.bottomPassed(),i.onUpdate&&i.onUpdate.call(v,s.get.elementCalculations()))},passed:function(e,t){var n=s.get.elementCalculations();if(e&&t)i.onPassed[e]=t;else{if(e!==F)return s.get.pixelsPassed(e)>n.pixelsPassed;n.passing&&R.each(i.onPassed,function(e,t){n.bottomVisible||n.pixelsPassed>s.get.pixelsPassed(e)?s.execute(t,e):i.once||s.remove.occurred(t)})}},onScreen:function(e){var t=s.get.elementCalculations(),n=e||i.onOnScreen,o="onScreen";if(e&&(s.debug("Adding callback for onScreen",e),i.onOnScreen=e),t.onScreen?s.execute(n,o):i.once||s.remove.occurred(o),e!==F)return t.onOnScreen},offScreen:function(e){var t=s.get.elementCalculations(),n=e||i.onOffScreen,o="offScreen";if(e&&(s.debug("Adding callback for offScreen",e),i.onOffScreen=e),t.offScreen?s.execute(n,o):i.once||s.remove.occurred(o),e!==F)return t.onOffScreen},passing:function(e){var t=s.get.elementCalculations(),n=e||i.onPassing,o="passing";if(e&&(s.debug("Adding callback for passing",e),i.onPassing=e),t.passing?s.execute(n,o):i.once||s.remove.occurred(o),e!==F)return t.passing},topVisible:function(e){var t=s.get.elementCalculations(),n=e||i.onTopVisible,o="topVisible";if(e&&(s.debug("Adding callback for top visible",e),i.onTopVisible=e),t.topVisible?s.execute(n,o):i.once||s.remove.occurred(o),e===F)return t.topVisible},bottomVisible:function(e){var t=s.get.elementCalculations(),n=e||i.onBottomVisible,o="bottomVisible";if(e&&(s.debug("Adding callback for bottom visible",e),i.onBottomVisible=e),t.bottomVisible?s.execute(n,o):i.once||s.remove.occurred(o),e===F)return t.bottomVisible},topPassed:function(e){var t=s.get.elementCalculations(),n=e||i.onTopPassed,o="topPassed";if(e&&(s.debug("Adding callback for top passed",e),i.onTopPassed=e),t.topPassed?s.execute(n,o):i.once||s.remove.occurred(o),e===F)return t.topPassed},bottomPassed:function(e){var t=s.get.elementCalculations(),n=e||i.onBottomPassed,o="bottomPassed";if(e&&(s.debug("Adding callback for bottom passed",e),i.onBottomPassed=e),t.bottomPassed?s.execute(n,o):i.once||s.remove.occurred(o),e===F)return t.bottomPassed},passingReverse:function(e){var t=s.get.elementCalculations(),n=e||i.onPassingReverse,o="passingReverse";if(e&&(s.debug("Adding callback for passing reverse",e),i.onPassingReverse=e),t.passing?i.once||s.remove.occurred(o):s.get.occurred("passing")&&s.execute(n,o),e!==F)return!t.passing},topVisibleReverse:function(e){var t=s.get.elementCalculations(),n=e||i.onTopVisibleReverse,o="topVisibleReverse";if(e&&(s.debug("Adding callback for top visible reverse",e),i.onTopVisibleReverse=e),t.topVisible?i.once||s.remove.occurred(o):s.get.occurred("topVisible")&&s.execute(n,o),e===F)return!t.topVisible},bottomVisibleReverse:function(e){var t=s.get.elementCalculations(),n=e||i.onBottomVisibleReverse,o="bottomVisibleReverse";if(e&&(s.debug("Adding callback for bottom visible reverse",e),i.onBottomVisibleReverse=e),t.bottomVisible?i.once||s.remove.occurred(o):s.get.occurred("bottomVisible")&&s.execute(n,o),e===F)return!t.bottomVisible},topPassedReverse:function(e){var t=s.get.elementCalculations(),n=e||i.onTopPassedReverse,o="topPassedReverse";if(e&&(s.debug("Adding callback for top passed reverse",e),i.onTopPassedReverse=e),t.topPassed?i.once||s.remove.occurred(o):s.get.occurred("topPassed")&&s.execute(n,o),e===F)return!t.onTopPassed},bottomPassedReverse:function(e){var t=s.get.elementCalculations(),n=e||i.onBottomPassedReverse,o="bottomPassedReverse";if(e&&(s.debug("Adding callback for bottom passed reverse",e),i.onBottomPassedReverse=e),t.bottomPassed?i.once||s.remove.occurred(o):s.get.occurred("bottomPassed")&&s.execute(n,o),e===F)return!t.bottomPassed},execute:function(e,t){var n=s.get.elementCalculations(),o=s.get.screenCalculations();(e=e||!1)&&(i.continuous?(s.debug("Callback being called continuously",t,n),e.call(v,n,o)):s.get.occurred(t)||(s.debug("Conditions met",t,n),e.call(v,n,o))),s.save.occurred(t)},remove:{fixed:function(){s.debug("Removing fixed position"),f.removeClass(o.fixed).css({position:"",top:"",left:"",zIndex:""}),i.onUnfixed.call(v)},placeholder:function(){s.debug("Removing placeholder content"),e&&e.remove()},occurred:function(e){if(e){var t=s.cache.occurred;t[e]!==F&&!0===t[e]&&(s.debug("Callback can now be called again",e),s.cache.occurred[e]=!1)}else s.cache.occurred={}}},save:{calculations:function(){s.verbose("Saving all calculations necessary to determine positioning"),s.save.direction(),s.save.screenCalculations(),s.save.elementCalculations()},occurred:function(e){e&&(s.cache.occurred[e]!==F&&!0===s.cache.occurred[e]||(s.verbose("Saving callback occurred",e),s.cache.occurred[e]=!0))},scroll:function(e){e=e+i.offset||g.scrollTop()+i.offset,s.cache.scroll=e},direction:function(){var e,t=s.get.scroll(),n=s.get.lastScroll();return e=n<t&&n?"down":t<n&&n?"up":"static",s.cache.direction=e,s.cache.direction},elementPosition:function(){var e=s.cache.element,t=s.get.screenSize();return s.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=f.offset(),e.width=f.outerWidth(),e.height=f.outerHeight(),s.is.verticallyScrollableContext()&&(e.offset.top+=g.scrollTop()-g.offset().top),s.is.horizontallyScrollableContext()&&(e.offset.left+=g.scrollLeft-g.offset().left),s.cache.element=e},elementCalculations:function(){var e=s.get.screenCalculations(),t=s.get.elementPosition();return i.includeMargin?(t.margin={},t.margin.top=parseInt(f.css("margin-top"),10),t.margin.bottom=parseInt(f.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topPassed=e.top>=t.top,t.bottomPassed=e.top>=t.bottom,t.topVisible=e.bottom>=t.top&&!t.topPassed,t.bottomVisible=e.bottom>=t.bottom&&!t.bottomPassed,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=(t.topVisible||t.passing)&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),s.cache.element=t,s.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=s.get.scroll();return s.save.direction(),s.cache.screen.top=e,s.cache.screen.bottom=e+s.cache.screen.height,s.cache.screen},screenSize:function(){s.verbose("Saving window position"),s.cache.screen={height:g.height()}},position:function(){s.save.screenSize(),s.save.elementPosition()}},get:{pixelsPassed:function(e){var t=s.get.elementCalculations();return-1<e.search("%")?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){return s.cache.occurred!==F&&s.cache.occurred[e]||!1},direction:function(){return s.cache.direction===F&&s.save.direction(),s.cache.direction},elementPosition:function(){return s.cache.element===F&&s.save.elementPosition(),s.cache.element},elementCalculations:function(){return s.cache.element===F&&s.save.elementCalculations(),s.cache.element},screenCalculations:function(){return s.cache.screen===F&&s.save.screenCalculations(),s.cache.screen},screenSize:function(){return s.cache.screen===F&&s.save.screenSize(),s.cache.screen},scroll:function(){return s.cache.scroll===F&&s.save.scroll(),s.cache.scroll},lastScroll:function(){return s.cache.screen===F?(s.debug("First scroll event, no last scroll could be found"),!1):s.cache.screen.top}},setting:function(e,t){if(R.isPlainObject(e))R.extend(!0,i,e);else{if(t===F)return i[e];i[e]=t}},internal:function(e,t){if(R.isPlainObject(e))R.extend(!0,s,e);else{if(t===F)return s[e];s[e]=t}},debug:function(){!i.silent&&i.debug&&(i.performance?s.performance.log(arguments):(s.debug=Function.prototype.bind.call(console.info,console,i.name+":"),s.debug.apply(console,arguments)))},verbose:function(){!i.silent&&i.verbose&&i.debug&&(i.performance?s.performance.log(arguments):(s.verbose=Function.prototype.bind.call(console.info,console,i.name+":"),s.verbose.apply(console,arguments)))},error:function(){i.silent||(s.error=Function.prototype.bind.call(console.error,console,i.name+":"),s.error.apply(console,arguments))},performance:{log:function(e){var t,n;i.performance&&(n=(t=(new Date).getTime())-(C||t),C=t,k.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:v,"Execution Time":n})),clearTimeout(s.performance.timer),s.performance.timer=setTimeout(s.performance.display,500)},display:function(){var e=i.name+":",n=0;C=!1,clearTimeout(s.performance.timer),R.each(k,function(e,t){n+=t["Execution Time"]}),e+=" "+n+"ms",y&&(e+=" '"+y+"'"),(console.group!==F||console.table!==F)&&0<k.length&&(console.groupCollapsed(e),console.table?console.table(k):R.each(k,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),k=[]}},invoke:function(o,e,t){var i,r,n,a=p;return e=e||E,t=v||t,"string"==typeof o&&a!==F&&(o=o.split(/[\. ]/),i=o.length-1,R.each(o,function(e,t){var n=e!=i?t+o[e+1].charAt(0).toUpperCase()+o[e+1].slice(1):o;if(R.isPlainObject(a[n])&&e!=i)a=a[n];else{if(a[n]!==F)return r=a[n],!1;if(!R.isPlainObject(a[t])||e==i)return a[t]!==F?r=a[t]:s.error(l.method,o),!1;a=a[t]}})),R.isFunction(r)?n=r.apply(t,e):r!==F&&(n=r),R.isArray(x)?x.push(n):x!==F?x=[x,n]:n!==F&&(x=n),r}},P?(p===F&&s.initialize(),p.save.scroll(),p.save.calculations(),s.invoke(w)):(p!==F&&p.invoke("destroy"),s.initialize())}),x!==F?x:this},R.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:T,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);